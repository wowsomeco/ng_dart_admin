<template #recursiveList let-list>
  <div *ngFor="let item of list" wCollapsible>
    <template [ngTemplateOutlet]="listItem"
      [ngTemplateOutletContext]="{'\$implicit': item.data, hasChildren: item.children.length > 0}"></template>
    <div *ngIf="item.children.length != null" #collapsibleItem>
      <template [ngTemplateOutlet]="recursiveList" [ngTemplateOutletContext]="{'\$implicit': item.children}"></template>
    </div>
  </div>
</template>
<template [ngTemplateOutlet]="recursiveList" [ngTemplateOutletContext]="{'\$implicit': list}"></template>